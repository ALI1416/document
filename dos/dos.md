# DOS/CMD命令

## 所有内部命令
| 常用 | 命令                 | 作用                                                      |
| ---- | -------------------- | --------------------------------------------------------- |
|      | ASSOC                | 显示或修改文件扩展名关联。                                |
|      | ATTRIB               | 显示或更改文件属性。                                      |
|      | ~~BREAK(无效)~~      | 设置或清除扩展式 CTRL+C 检查。                            |
|      | BCDEDIT              | 设置启动数据库中的属性以控制启动加载。                    |
|      | CACLS(请使用ICACLS)  | 显示或修改文件的访问控制列表(ACL)。                       |
| ■    | CALL                 | 从另一个批处理程序调用这一个。                            |
| ■    | CD                   | 显示当前目录的名称或将其更改。                            |
| ■    | CHCP                 | 显示或设置活动代码页数。                                  |
|      | CHDIR(同CD)          | 显示当前目录的名称或将其更改。                            |
|      | CHKDSK               | 检查磁盘并显示状态报告。                                  |
|      | CHKNTFS              | 显示或修改启动时间磁盘检查。                              |
| ■    | CLS                  | 清除屏幕。                                                |
| ■    | CMD                  | 打开另一个 Windows 命令解释程序窗口。                     |
| ■    | COLOR                | 设置默认控制台前景和背景颜色。                            |
|      | COMP                 | 比较两个或两套文件的内容。                                |
|      | COMPACT              | 显示或更改 NTFS 分区上文件的压缩。                        |
|      | CONVERT              | 将 FAT 卷转换成 NTFS。你不能转换当前驱动器。              |
| ■    | COPY                 | 将至少一个文件复制到另一个位置。                          |
| ■    | DATE                 | 显示或设置日期。                                          |
| ■    | DEL                  | 删除至少一个文件。                                        |
| ■    | DIR                  | 显示一个目录中的文件和子目录。                            |
|      | DISKPART             | 显示或配置磁盘分区属性。                                  |
|      | DOSKEY               | 编辑命令行、撤回 Windows 命令并创建宏。                   |
|      | DRIVERQUERY          | 显示当前设备驱动程序状态和属性。                          |
| ■    | ECHO                 | 显示消息，或将命令回显打开或关闭。                        |
|      | ENDLOCAL             | 结束批文件中环境更改的本地化。                            |
|      | ERASE(同DEL)         | 删除一个或多个文件。                                      |
| ■    | EXIT                 | 退出 CMD.EXE 程序(命令解释程序)。                         |
|      | FC                   | 比较两个文件或两个文件集并显示它们之间的不同。            |
| ■    | FIND                 | 在一个或多个文件中搜索一个文本字符串。                    |
| ■    | FINDSTR              | 在多个文件中搜索字符串。                                  |
| ■    | FOR                  | 为一组文件中的每个文件运行一个指定的命令。                |
|      | FORMAT               | 格式化磁盘，以便用于 Windows。                            |
|      | FSUTIL               | 显示或配置文件系统属性。                                  |
|      | FTYPE                | 显示或修改在文件扩展名关联中使用的文件类型。              |
| ■    | GOTO                 | 将 Windows 命令解释程序定向到批处理程序中某个带标签的行。 |
|      | GPRESULT             | 显示计算机或用户的组策略信息。                            |
|      | ~~GRAFTABL(不存在)~~ | 使 Windows 在图形模式下显示扩展字符集。                   |
| ■    | HELP                 | 提供 Windows 命令的帮助信息。                             |
|      | ICACLS               | 显示、修改、备份或还原文件和目录的 ACL。                  |
| ■    | IF                   | 在批处理程序中执行有条件的处理操作。                      |
|      | LABEL                | 创建、更改或删除磁盘的卷标。                              |
| ■    | MD                   | 创建一个目录。                                            |
|      | MKDIR(同MD)          | 创建一个目录。                                            |
| ■    | MKLINK               | 创建符号链接和硬链接                                      |
| ■    | MODE                 | 配置系统设备。                                            |
| ■    | MORE                 | 逐屏显示输出。                                            |
| ■    | MOVE                 | 将一个或多个文件从一个目录移动到另一个目录。              |
|      | OPENFILES            | 显示远程用户为了文件共享而打开的文件。                    |
|      | PATH                 | 为可执行文件显示或设置搜索路径。                          |
| ■    | PAUSE                | 暂停批处理文件的处理并显示消息。                          |
|      | POPD                 | 还原通过 PUSHD 保存的当前目录的上一个值。                 |
|      | PRINT                | 打印一个文本文件。                                        |
|      | PROMPT               | 更改 Windows 命令提示。                                   |
|      | PUSHD                | 保存当前目录，然后对其进行更改。                          |
| ■    | RD                   | 删除目录。                                                |
|      | RECOVER              | 从损坏的或有缺陷的磁盘中恢复可读信息。                    |
| ■    | REM                  | 记录批处理文件或 CONFIG.SYS 中的注释(批注)。              |
| ■    | REN                  | 重命名文件。                                              |
|      | RENAME(同REN)        | 重命名文件。                                              |
| ■    | REPLACE              | 替换文件。                                                |
|      | RMDIR(RD)            | 删除目录。                                                |
|      | ROBOCOPY             | 复制文件和目录树的高级实用工具                            |
| ■    | SET                  | 显示、设置或删除 Windows 环境变量。                       |
|      | SETLOCAL             | 开始本地化批处理文件中的环境更改。                        |
|      | SC                   | 显示或配置服务(后台进程)。                                |
|      | SCHTASKS             | 安排在一台计算机上运行命令和程序。                        |
|      | SHIFT                | 调整批处理文件中可替换参数的位置。                        |
| ■    | SHUTDOWN             | 允许通过本地或远程方式正确关闭计算机。                    |
| ■    | SORT                 | 对输入排序。                                              |
| ■    | START                | 启动单独的窗口以运行指定的程序或命令。                    |
|      | SUBST                | 将路径与驱动器号关联。                                    |
|      | SYSTEMINFO           | 显示计算机的特定属性和配置。                              |
| ■    | TASKLIST             | 显示包括服务在内的所有当前运行的任务。                    |
| ■    | TASKKILL             | 中止或停止正在运行的进程或应用程序。                      |
| ■    | TIME                 | 显示或设置系统时间。                                      |
| ■    | TITLE                | 设置 CMD.EXE 会话的窗口标题。                             |
| ■    | TREE                 | 以图形方式显示驱动程序或路径的目录结构。                  |
| ■    | TYPE                 | 显示文本文件的内容。                                      |
|      | VER                  | 显示 Windows 的版本。                                     |
|      | VERIFY               | 告诉 Windows 是否进行验证，以确保文件正确写入磁盘。       |
|      | VOL                  | 显示磁盘卷标和序列号。                                    |
| ■    | XCOPY                | 复制文件和目录树。                                        |
|      | WMIC                 | 在交互式命令 shell 中显示 WMI 信息。                      |

## 常用简单命令
| 常用 | 命令    | 作用         | 示例                                | 解释                                                     |
| ---- | ------- | ------------ | ----------------------------------- | -------------------------------------------------------- |
| ■    | help    | 帮助         | help                                | 显示所有系统命令<br>help 命令名 ->显示该命令的帮助信息   |
| ■    | rem或:: | 注释         | rem 注释信息                        | 注释                                                     |
| ■    | chcp    | 字符集       | ①chcp<br>②chcp 数字                 | ①显示使用的字符集<br>②设置字符集(936是GBK，65001是UTF-8) |
| ■    | color   | 颜色         | color 07                            | 设置黑底白字(颜色代码见下)                               |
| ■    | mode    | 设置窗口大小 | mode 100,30                         | 设置窗口宽100高30                                        |
| ■    | date    | 日期         | ①date<br>②date /t                   | ①显示并设置日期<br>②显示日期                             |
| ■    | time    | 时间         | ①time<br>②time /t                   | ①显示并设置时间<br>②显示时间                             |
| ■    | echo    | 显示消息     | ①echo 消息<br>②echo [on &#124; off] | ①显示消息<br>②开启/关闭回显                              |
| ■    | cls     | 清除屏幕     |                                     |
| ■    | pause   | 暂停         |                                     |
| ■    | exit    | 退出         |                                     |
| ■    | goto    | 跳转         | goto 标签                           | 跳转到标签处                                             |
| ■    | :       | 标签         | :标签                               | goto可以跳转到的地方                                     |
| ■    | @       | 关闭本行回显 | ①@命令<br>②@echo off                | ①关闭本行回显<br>②本行和后面回显关闭                     |
| ■    | /?      | 查看帮助     | 命令 /?                             | 查看帮助信息                                             |

## 特殊字符
| 常用 | 字符            | 作用                                          | 示例                                                                        | 解释                                |
| ---- | --------------- | --------------------------------------------- | --------------------------------------------------------------------------- | ----------------------------------- |
| ■    | >               | 命令输出到文件                                | dir >1.txt                                                                  | 内容覆盖到1.txt                     |
| ■    | >>              | 命令输出到文件(追加)                          | dir >1.txt                                                                  | 内容追加到1.txt                     |
|      | <               | 文件中读取命令输入                            | sort <1.txt                                                                 | 对1.txt文件内容进行排序             |
| ■    | &#124;          | 管道符。左结果作为右参数                      | dir c:\                                                  &#124; findstr "w" | 输出c盘中含有w字符串                |
|      | &               | 命令分隔符。相当于换行符                      | dir a:\ & dir c:\                                                           | 输出找不到a盘，输出c盘              |
| ■    | &#124;&#124;    | 或。左失败，右执行；左成功，右不执行          | ①dir a:\ &#124;&#124; dir c:\ <br>②dir c:\ &#124;&#124; dir d:\             | ①输出找不到a盘，输出c盘<br>②输出c盘 |
| ■    | &&              | 且。左失败，右不执行；左成功，右执行          | ①dir a:\ && dir c:\ <br>②dir c:\ && dir d:\                                 | ①输出找不到a盘<br>②输出c盘和d盘     |
|      | && &#124;&#124; | 相当于if-else。左成功，执行中；左失败，执行右 | dir c:\ && echo ok &#124;&#124; echo error                                  | 输出c盘，输出ok                     |
| ■    | >&和<&          | 重定向左句柄到右                              | 见下                                                                        | 见下                                |

默认情况下，可以从键盘将命令输入（即STDIN句柄）发送到cmd，然后由cmd将命令输出（即STDOUT句柄）发送到命令提示符窗口。

| 句柄      | 代号 | 说明                             |
| --------- | ---- | -------------------------------- |
| STDIN     | 0    | 键盘输入                         |
| STDOUT    | 1    | 输出到命令提示符窗口             |
| STDERR    | 2    | 错误输出到命令提示符窗口         |
| UNDEFINED | 3-9  | 由应用程序和各个具体工具单独定义 |

数字0到9代表前10个句柄。可以使用命令cmd运行程序并将前10个句柄中的任何一个重定向到该程序。要指定想使用的句柄，可在重定向操作符前面键入该句柄的数字。如果未定义句柄，则默认的<重定向输入操作符是0，而默认的>重定向输出操作符是1。键入>或<操作符之后，必须指定要读取或写入数据的位置。可以指定文件名或另一个现有的句柄。

| 常用 | 命令               | 作用             | 示例              | 解释                             |
| ---- | ------------------ | ---------------- | ----------------- | -------------------------------- |
| ■    | 2>                 | 重定向错误       | dir 1.txt 2>2.txt | 结果输出到1.txt，错误输出到2.txt |
| ■    | 2>&1(2<&1效果一样) | 重定向错误到输出 | dir 1.txt 2>&1    | 结果和错误都输出到1.txt          |

## 颜色代码
| 代码 | 颜色代码 | 颜色   | 色块                                          | 代码 | 颜色代码 | 颜色     | 色块                                          |
| ---- | -------- | ------ | --------------------------------------------- | ---- | -------- | -------- | --------------------------------------------- |
| 0    | 000000   | 黑色   | <div style="background:#000000;">&emsp;</div> | 8    | 808080   | 灰色     | <div style="background:#808080;">&emsp;</div> |
| 1    | 000080   | 蓝色   | <div style="background:#000080;">&emsp;</div> | 9    | 0000FF   | 淡蓝色   | <div style="background:#0000FF;">&emsp;</div> |
| 2    | 008000   | 绿色   | <div style="background:#008000;">&emsp;</div> | A    | 00FF00   | 淡绿色   | <div style="background:#00FF00;">&emsp;</div> |
| 3    | 008080   | 浅绿色 | <div style="background:#008080;">&emsp;</div> | B    | 00FFFF   | 淡浅绿色 | <div style="background:#00FFFF;">&emsp;</div> |
| 4    | 800000   | 红色   | <div style="background:#800000;">&emsp;</div> | C    | FF0000   | 淡红色   | <div style="background:#FF0000;">&emsp;</div> |
| 5    | 800080   | 紫色   | <div style="background:#800080;">&emsp;</div> | D    | FF00FF   | 淡紫色   | <div style="background:#FF00FF;">&emsp;</div> |
| 6    | 808000   | 黄色   | <div style="background:#808000;">&emsp;</div> | E    | FFFF00   | 淡黄色   | <div style="background:#FFFF00;">&emsp;</div> |
| 7    | C0C0C0   | 白色   | <div style="background:#C0C0C0;">&emsp;</div> | F    | FFFFFF   | 亮白色   | <div style="background:#FFFFFF;">&emsp;</div> |

## set 显示、设置或删除cmd.exe环境变量
**格式：`set [变量名=[值]]`**
### 命令
| 常用 | 命令    | 解释                     |
| ---- | ------- | ------------------------ |
| ■    | set     | 显示所有变量以及系统变量 |
| ■    | set a   | 显示a变量或a开头的变量   |
| ■    | set a=1 | 设置a的值为1             |
| ■    | set a=  | 删除a                    |

**格式：`set /a [变量名=]表达式`**
### 命令
| 常用 | 命令         | 解释                 |
| ---- | ------------ | -------------------- |
|      | set /a 1+1   | 计算1+1并输出        |
| ■    | set /a v=1+1 | 计算1+1赋值到v并输出 |

**格式：`set /p 变量名=[提示信息]`**
### 命令
| 常用 | 命令            | 解释                          |
| ---- | --------------- | ----------------------------- |
|      | set /p a=       | 用户手动赋值a                 |
| ■    | set /p a=请输入 | 用户手动赋值a，并提示“请输入” |

## cd 显示当前目录名或改变当前目录
**格式：`cd [/d] [盘符:][路径]`**
### 命令
| 常用 | 命令         | 解释                 |
| ---- | ------------ | -------------------- |
| ■    | cd           | 显示当前路径         |
| ■    | cd ..        | 返回父目录           |
| ■    | cd /         | 返回该盘根目录       |
| ■    | cd abc       | 打开abc文件夹        |
| ■    | cd /d e:     | 打开e盘，同命令e:    |
| ■    | cd /d e:/abc | 打开e盘下的abc文件夹 |

## dir 显示目录中的文件和子目录列表
**格式：`dir [盘符:][路径][文件名] [/a[[:]属性]] [/b] [/c] [/d] [/l] [/n] [/o[[:]排列顺序]] [/p] [/q] [/r] [/s] [/t[[:]时间段]] [/w] [/x] [/4]`**

### /a 属性
| 字段 | 含义           | 字段 | 含义           |
| ---- | -------------- | ---- | -------------- |
| D    | 目录           | R    | 只读文件       |
| H    | 隐藏文件       | A(?) | 准备存档的文件 |
| S    | 系统文件       | I(?) | 无内容索引文件 |
| L(?) | 重新分析点     | O(?) | 脱机文件       |
| -    | 表示“否”的前缀 |      |                |

### /o 排列顺序
| 字段 | 含义               | 字段 | 含义                  |
| ---- | ------------------ | ---- | --------------------- |
| N    | 按名称(字母顺序)   | S    | 按大小(从小到大)      |
| E    | 按扩展名(字母顺序) | D    | 按日期/时间(从先到后) |
| G    | 组目录优先         | -    | 反转顺序的前缀        |

### /t 时间段
| 字段 | 含义           | 字段 | 含义         |
| ---- | -------------- | ---- | ------------ |
| C    | 创建时间       | A    | 上次访问时间 |
| W    | 上次写入的时间 |      |              |

### 命令
| 常用 | 命令         | 解释                           |
| ---- | ------------ | ------------------------------ |
| ■    | dir          | 当前路径下文件和文件夹         |
| ■    | dir c:       | c盘                            |
| ■    | dir e:files  | e盘files文件夹下               |
|      | dir e:/1.txt | e盘1.txt文件                   |
| ■    | dir e:/*.txt | e盘下后缀为txt的文件           |
| ■    | dir /a       | +隐藏的文件夹和文件夹          |
| ■    | dir /ad      | 仅显示文件夹                   |
| ■    | dir /a-d     | 仅显示文件                     |
| ■    | dir /b       | 空格式                         |
|      | dir /-c      | 不显示容量大小的千分符         |
|      | dir /w       | 宽格式，按行                   |
|      | dir /d       | 宽格式，按列                   |
|      | dir /l       | 小写                           |
|      | dir /-n      | 旧格式                         |
|      | dir /o-n     | 文件名倒排                     |
|      | dir /og      | 文件夹优先                     |
|      | dir /p       | 输出完每一屏后暂停             |
|      | dir /q       | +文件所有者                    |
| ■    | dir /s       | +子目录中的文件                |
|      | dir /x       | +旧格式文件名                  |
|      | dir /r(?)    | +文件的备用数据流              |
|      | dir /t(?)    | 控制显示或用来分类的时间字符域 |
|      | dir /4(?)    | 以四位数字显示年份             |

### 样式
#### 默认格式
```txt
E:\>dir
 驱动器 E 中的卷是 软件
 卷的序列号是 156B-84B9

 E:\ 的目录

2021/04/26 周一  16:19                12 1.txt
2021/04/26 周一  16:23    <DIR>          files
2021/04/26 周一  14:24    <DIR>          Program Files
2021/04/21 周三  08:59    <DIR>          Program Files (x86)
2021/04/21 周三  08:59    <DIR>          ProgramData
2021/03/31 周三  14:11    <DIR>          software
2021/04/21 周三  09:23    <DIR>          Windows Kits
               1 个文件             12 字节
               6 个目录 237,119,971,328 可用字节
```
#### 旧格式
```txt
E:\>dir /-n
 驱动器 E 中的卷是 软件
 卷的序列号是 156B-84B9

 E:\ 的目录

1        txt                 12 2021/04/26 周一  16:19
files         <DIR>             2021/04/26 周一  16:23
PROGRA~1      <DIR>             2021/04/26 周一  14:24
PROGRA~2      <DIR>             2021/04/21 周三  08:59
PROGRA~3      <DIR>             2021/04/21 周三  08:59
software      <DIR>             2021/03/31 周三  14:11
WINDOW~1      <DIR>             2021/04/21 周三  09:23
               1 个文件             12 字节
               6 个目录 237,119,971,328 可用字节
```
#### 空格式
```txt
E:\>dir/b
1.txt
files
Program Files
Program Files (x86)
ProgramData
software
Windows Kits
```
#### 宽格式，按行
```txt
E:\>dir /w
 驱动器 E 中的卷是 软件
 卷的序列号是 156B-84B9

 E:\ 的目录

1.txt                 [files]               [Program Files]       [Program Files (x86)] [ProgramData]
[software]            [Windows Kits]
               1 个文件             12 字节
               6 个目录 237,119,971,328 可用字节
```
#### 宽格式，按列
```txt
E:\>dir /d
 驱动器 E 中的卷是 软件
 卷的序列号是 156B-84B9

 E:\ 的目录

1.txt                 [Program Files]       [ProgramData]         [Windows Kits]
[files]               [Program Files (x86)] [software]
               1 个文件             12 字节
               6 个目录 237,119,971,328 可用字节
```

## tree 以图形显示驱动器或路径的文件夹结构
**格式：`tree [盘符:][路径] [/f] [/a]`**
### 命令
| 常用    | 命令              | 解释 |
| ------- | ----------------- | ---- |
| tree    | 默认格式          |      |
| tree /a | 树枝使用ASCII字符 |      |
| tree /f | 展示文件          |      |

### 样式
#### 默认格式
```txt
E:\a>tree
卷 软件 的文件夹 PATH 列表
卷序列号为 156B-84B9
E:.
└─新建文件夹
    └─bbb
```
#### 树枝使用ASCII字符
```txt
E:\a>tree /a
卷 软件 的文件夹 PATH 列表
卷序列号为 156B-84B9
E:.
\---新建文件夹
    \---bbb
```
#### 展示文件
```txt
E:\a>tree /f
卷 软件 的文件夹 PATH 列表
卷序列号为 156B-84B9
E:.
│  1.txt
│  2.txt
│
└─新建文件夹
    │  新建 Microsoft Excel 工作表.xlsx
    │
    └─bbb
            新建 Microsoft Visio 绘图.vsd
```
```txt
E:\a>tree /f /a
卷 软件 的文件夹 PATH 列表
卷序列号为 156B-84B9
E:.
|   1.txt
|   2.txt
|
\---新建文件夹
    |   新建 Microsoft Excel 工作表.xlsx
    |
    \---bbb
            新建 Microsoft Visio 绘图.vsd
```

## copy 将一份或多份文件复制到另一个位置
**格式：`copy [/d] [/v] [/n] [/y | /-y] [/z] [/l] [/a | /b ] 源 [/a | /b] [+ 源 [/a | /b] [+ ...]] [目的 [/a | /b]]`**
### 命令
| 常用 | 命令                   | 解释                                                           |
| ---- | ---------------------- | -------------------------------------------------------------- |
| ■    | copy 1.txt 2.txt       | 复制1.txt为2.txt                                               |
|      | copy 1.txt+2.txt files | 合并1.txt和2.txt到files文件夹成1.txt                           |
|      | copy /a 1.txt 2.txt    | ASCII文件复制方式                                              |
|      | copy /b 1.exe 2.exe    | 二进制文件复制方式                                             |
| ■    | copy /y 1.txt 2.txt    | 不使用确认是否要覆盖现有目标文件的提示                         |
|      | copy /-y 1.txt 2.txt   | 使用确认是否要覆盖现有目标文件的提示                           |
|      | copy /v 1.txt 2.txt    | 验证新文件写入是否正确                                         |
|      | copy /d(?)             | 允许解密要创建的目标文件                                       |
|      | copy /z(?)             | 用可重新启动模式复制已联网的文件                               |
|      | copy /l(?)             | 如果源是符号链接，请将链接复制到目标而不是源链接指向的实际文件 |

## xcopy 复制文件和目录树
格式：`xcopy 源 [目的] [/a | /m] [/d[:时间m-d-y格式]] [/p] [/s [/e]] [/v] [/w] [/c] [/i] [/q] [/f] [/l] [/g] [/h] [/r] [/t] [/u] [/k] [/n] [/o] [/x] [/y] [/-y] [/z] [/b] [/j] [/exclude:文件1[+文件2][+文件3]...] [/compress]`
### 命令
| 常用 | 命令              | 解释                                 |
| ---- | ----------------- | ------------------------------------ |
|      | xcopy 1.txt 2.txt | 复制1.txt，选择2.txt是文件还是文件夹 |
|      |                   |                                      |
|      |                   |                                      |
|      |                   |                                      |
|      |                   |                                      |
|      |                   |                                      |

