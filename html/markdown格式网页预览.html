<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="favicon.ico">
  <!-- https://github.com/markedjs/marked -->
  <script type="text/javascript" src="https://unpkg.com/marked/lib/marked.umd.js"></script>
  <!-- https://github.com/sindresorhus/github-markdown-css -->
  <link type="text/css" rel="stylesheet" href="https://unpkg.com/github-markdown-css/github-markdown.css">
  <!-- https://github.com/tscanlin/tocbot -->
  <script type="text/javascript" src="https://unpkg.com/tocbot/dist/tocbot.min.js"></script>

  <title>markdown格式网页预览</title>
  <style>
    :root {
     /* color-scheme: dark; */
    }

    body {
      margin: 0;
      overflow: hidden;
    }

    @media (prefers-color-scheme: dark) {
      body {
        background-color: #0d1117;
      }

      .toc-list {
        color: white;
      }
    }

    #main {
      min-width: 600px;
      padding: 10px;
    }

    #toc-container {
      /* border: black 1px solid; */
      display: inline-block;
      width: 150px;
      height: calc(100vh - 30px);
      vertical-align: top;
      overflow: auto;
    }

    #markdown-body {
      /* border: black 1px solid; */
      display: inline-block;
      width: calc(100vw - 190px);
      height: calc(100vh - 30px);
      padding-left: 5px;
      overflow: auto;
    }

    .toc-list {
      margin: 0;
      padding: 0;
      list-style-type: none;

      li {
        padding-left: 5px;
      }

      a {
        text-decoration: none;
        color: currentColor;
        white-space: nowrap;
      }
    }
  </style>
</head>

<body>
<div id="main">
  <div id="toc-container"></div>
  <div id="markdown-body" class="markdown-body"></div>
</div>
<script>
  let id = 0
  const renderer = new marked.Renderer();
  renderer.heading = function (heading) {
    return `<h${heading.depth} id="title-${id++}-${heading.text}">${heading.text}</h${heading.depth}>`;
  }
  marked.setOptions({renderer});

  async function parse() {
    document.getElementById('markdown-body').innerHTML = marked.parse(await (await fetch('./README.md')).text())
    tocbot.init({
      tocSelector: '#toc-container',
      contentSelector: '#markdown-body',
      headingSelector: 'h1, h2, h3, h4',
    });
  }

  parse()
</script>
</body>

</html>
