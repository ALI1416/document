# Shell脚本

## 文件

- 使用`.sh`作为文件后缀
- 使用`sh 文件名.sh`执行脚本，也可以使用`dash`、`bash`

## 注释

注释使用`#`标记，例如

```sh
#!/bin/sh
# 单行注释
# echo "Hello"
echo "World" # 行尾注释
```

文件头部需要指定解释器，告诉脚本应该由哪个程序来解释执行，例如

```sh
#!/bin/sh
echo "Hello, World!"
```

- `#!/bin/dash`：精简(Ubuntu默认)
- `#!/bin/sh`：默认
- `#!/bin/bash`：专业

## 变量

- 不用定义数据类型
- 使用`=`赋值
- `=`两侧不能加`空格`
- 变量名只能包含字母、数字和下划线，不能以数字开头

使用`$`引用变量

```sh
#!/bin/sh
# 字符串变量
my_var="Hello, World!"
echo $my_var

name="John Doe"
# 变量可以插入到引号内
echo "Hello, $name"

number=42
# 数字变量
echo "The number is $number"
```

修饰符`readonly`只读变量(常量)

```sh
#!/bin/sh
readonly val="value"
# 这将会报错
val="new_value"
```

定义数组(bash才可，sh、dash不支持)

```sh
#!/bin/bash
arr=(value1 value2 value3)
echo ${arr[1]}
```

### 环境变量

- 修饰符`export`可以将变量设置为环境变量
- `printenv`或`env`查看当前所有环境变量

```sh
#!/bin/sh
env
echo "----------"
export MY_ENV_VAR="value"
env
```

### 常用Shell变量

- `$0`：当前脚本的文件名
- `$1`、`$2`...：传递给脚本或函数的参数
- `$#`：传递给脚本或函数的参数个数
- `$@`：传递给脚本或函数的所有参数
- `$?`：上个命令的退出状态
- `$$`：当前Shell进程的PID
- `$!`：后台运行的最后一个进程的PID

## 输入

`read`命令用于从标准输入读取一行输入，并将其分配给一个或多个变量

```sh
#!/bin/sh
echo "Enter your name:"
read name
echo "Hello, $name!"
```
