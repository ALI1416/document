# vi

## 模式

- `命令行模式`：控制屏幕光标的移动，字符、字或行的删除，移动复制某区段及进入`插入模式`和`底行模式`
- `插入模式`：只有在`插入模式`下，才可以做文字输入，按`ESC`键可回到`命令行模式`
- `底行模式`：将文件保存或退出`vi`，也可以设置编辑环境，如寻找字符串、列出行号等

## 基本操作

- 进入vi后，是处于`命令行模式`，切换到`插入模式`才能够输入文字
- 在`命令行模式`下按一下字母`a`进入`插入模式`
- 如果要删除文字，要先按一下`ESC`键转到`命令行模式`才可删除
- 保存文件，在`命令行模式`下，按一下`:`冒号键进入`底行模式`，输入`w`并`回车`

## `命令行模式`功能键

- `.`：重复上一次的命令
- 保存文件
  - `:w`：保存
  - `:w!`：强制保存(只读文件)
  - `:w 文件名.txt`：另存为
  - `:q`：退出(未修改文件)
  - `:q!`：不保存文件退出
  - `:wq`：保存并退出
  - `:wq!`：强制保存并退出
  - `:set nu`：显示行号
  - `:set nonu`：不显示行号
  - `:! 命令`：暂时退出vi，执行命令并显示结果
- 进入`插入模式`
  - `a`：光标右侧输入
  - `i`：光标左侧输入
  - `A`：当前行尾输入
  - `I`：当前行首(非空字符)输入
  - `o`：当前行下一行输入
  - `O`：当前行上一行输入
  - `r`：替换当前光标字符
  - `R`：替换当前光标及后面字符(插入操作)
  - `s`：替换当前光标字符并输入
  - `S`：删除当前行内容并输入
  - `cw`：删除当前单词的光标开始处内容并输入
- 移动光标
  - `↑`、`Ctrl+Y`：上一行
  - `↓`、`Ctrl+E`：下一行
  - `←`：左一列
  - `→`：右一列
  - n`h`：左
  - n`j`：下
  - n`k`：上
  - n`l`：右
  - n`空格`：右
  - n`回退`：左
  - `0`：行首
  - `^`：非空字符行首
  - `$`：行尾
  - n`+`、n`确认`：下一行非空字符行首
  - n`-`：上一行非空字符行首
  - `gg`：第一行非空字符行首
  - `G`、`Shift+G`：最后一行非空字符行首
  - `:n`、`ngg`、`nG`：第n行非空字符行首
  - `H`：当前页第一行非空字符行首
  - `M`：当前页中间行非空字符行首
  - `L`：当前页最后一行非空字符行首
  - n`zt`：把当前行移动到页首
  - n`zz`：把当前行移动到页中
  - n`zb`：把当前行移动到页尾
  - n`b`：(下一个)单词词首
  - n`e`：(下一个)单词词尾
  - n`w`：下一个单词词首
  - n`{`：上一个段落的空白行
  - n`}`：下一个段落的空白行
  - n`(`：上一个段落的空白行和第一行非空字符行首
  - n`)`：下一个段落的空白行和第一行非空字符行首
  - `Ctrl+F`：下一页
  - `Ctrl+B`：上一页
  - `Ctrl+D`：后半页
  - `Ctrl+U`：前半页
  - n`fx`：当前行下一个字符x
  - n`Fx`：当前行上一个字符x
  - n`tx`：当前行下一个字符x前
  - n`Tx`：当前行上一个字符x前
  - `%`：当前行向后查找括号`()[]{}`，不包括`<>`
- 删除和恢复
  - n`x`、n`删除`：删除当前字符
  - n`X`：删除前一个字符
  - n`dd`：删除当前行
  - `d0`：删除当前字符到行首
  - `d^`：删除当前字符到非空字符行首
  - `d$`：删除当前字符到行尾
  - `de`：删除当前字符到单词尾
  - `dE`：删除当前字符到单词尾(含标点符号)
  - `dw`：删除当前字符到单词尾以及后面空白字符
  - `dW`：删除当前字符到单词尾及后面空白字符(含标点符号)
  - `db`：删除当前字符前到单词首
  - `dB`：删除当前字符前到单词首(含标点符号)
  - n`D`：删除当前及后面字符
  - n`J`：当前行的`换行符`替换为`空格`
  - n`u`：撤销上一步操作
  - n`Ctrl+R`：重做撤销
  - `U`：撤销对当前行的所有操作
- 复制和粘贴
  - ``：
