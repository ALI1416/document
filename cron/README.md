# cron cron表达式

cron表达式生成器：<https://cron.qqe2.com/>

## 结构

从左到右分别为：`秒 分 时 日 月 星期 年(可选)`，各字段用空格隔开

### 字段含义

| 字段名 | 英文       | 允许值            | 允许通配符      |
| ------ | ---------- | ----------------- | --------------- |
| 秒     | Seconds    | `0-59`            | `, - * /`       |
| 分     | Minutes    | `0-59`            | `, - * /`       |
| 时     | Hours      | `0-23`            | `, - * /`       |
| 日     | DayofMonth | `1-31`            | `, - * / ? L W` |
| 月     | Month      | `1-12`或`JAN-DEC` | `, - * /`       |
| 星期   | DayofWeek  | `1-7`或`SUN-SAT`  | `, - * / ? L #` |
| 年     | Year       | `1970-2099`       | `, - * /`       |

### 值

注意：`DayofMonth`和`DayofWeek`有且仅有一个为`?`

#### `DayofMonth` 月

| 中文 | 1月 | 2月 | 3月 | 4月 | 5月 | 6月 | 7月 | 8月 | 9月 | 10月 | 11月 | 12月 |
| ---- | --- | --- | --- | --- | --- | --- | --- | --- | --- | ---- | ---- | ---- |
| 数值 | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   | 10   | 11   | 12   |
| 英文 | JAN | FEB | MAR | APR | MAY | JUN | JUL | AUG | SEP | OCT  | NOV  | DEC  |

#### `DayofWeek` 星期

| 中文 | 星期日 | 星期一 | 星期二 | 星期三 | 星期四 | 星期五 | 星期六 |
| ---- | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| 数值 | 1      | 2      | 3      | 4      | 5      | 6      | 7      |
| 英文 | SUN    | MON    | TUE    | WED    | THUR   | FRI    | SAT    |

### 通配符

#### `*` 匹配任意值

例如在`Minutes`域使用`*`(`0 * * * * ?`)，表示每分钟都会触发事件

#### `,` 列出枚举值

例如在`Minutes`域使用`5,20`(`0 5,20 * * * ?`)，表示在5和20分钟触发一次

#### `-` 范围

例如在`Minutes`域使用`5-20`(`0 5-20 * * * ?`)，表示从5到20分钟每分钟触发一次

#### `/` 何时开始隔多久

左侧表示起始触发时间，右侧表示间隔时间。  
例如在`Minutes`域使用`5/20`(`0 5/20 * * * ?`)，表示从5分钟时开始触发，每隔20分钟触发下一次(仅限在此域内)，即只在`5、25、45`分钟时触发

#### `?` 忽略

只在`DayofMonth`和`DayofWeek`域内有效。  
例如在`DayofWeek`域使用`?`(`0 0 0 20 * ?`)，表示在每月20号触发。最后一位星期需要用`?`，表示无论20号是星期几都触发，如果使用`*`则表示无论星期几都触发  
例如在`DayofMonth`域使用`?`(`0 0 0 ? * SUN`)，表示在每周日触发

#### `L` 最后

只在`DayofMonth`和`DayofWeek`域内有效。  
例如在`DayofMonth`域使用`L`(`0 0 0 L * ?`)，表示当月最后一天触发；例如`0 0 0 2L * ?`，表示当月倒数第二天触发(部分程序不支持)  
例如在`DayofWeek`域使用`5L`(`0 0 0 ? * 5L`)，表示最后的一个星期四触发

#### `W` 有效工作日

只在`DayofMonth`域内有效。  
例如使用`5W`(`0 0 0 5W * ?`)，表示距离当月5号最近(不跨月)的工作日(周一到周五)触发；例如`0 0 0 31W * ?`，表示距离当月31号最近的工作日触发(部分程序不支持)

#### `LW` 当前月最后一个工作日

只在`DayofMonth`域内有效。  
例如使用`LW`(`0 0 0 LW * ?`)，表示当前月最后一个工作日触发；例如`0 0 0 2LW * ?`，表示当月倒数第二个工作日触发(部分程序不支持)

#### `#` 当前月份第几个星期几

只在`DayofWeek`域内有效。  
左侧表示星期几，右侧表示第几个。  
例如使用`4#2`(`0 0 0 ? * 4#2`)，表示当前月第二个星期三触发

## 示例

- `0 0/1 * * * ?` : 每隔1分钟
- `0 0 9,17 * * ?` : 9点和17点
- `0 5/10 9-17 * * ?` : 9点到17点和0点，从5分开始每隔10分钟
- `0 0 0 ? * MON-WED,SAT` : 星期1-3和6
- `0 0 0 22 2 ? 2022` : 2022年2月22日
